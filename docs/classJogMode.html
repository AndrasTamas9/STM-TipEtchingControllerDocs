<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>STM Tip Etching Controller: JogMode Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">STM Tip Etching Controller
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classJogMode-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">JogMode Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Manual jogging mode for up/down movement with keypad (JOG).  
 <a href="classJogMode.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="Modes_8h_source.html">Modes.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for JogMode:</div>
<div class="dyncontent">
<div class="center"><img src="classJogMode__inherit__graph.png" border="0" usemap="#aJogMode_inherit__map" alt="Inheritance graph"/></div>
<map name="aJogMode_inherit__map" id="aJogMode_inherit__map">
<area shape="rect" title="Manual jogging mode for up/down movement with keypad (JOG)." alt="" coords="5,79,84,104"/>
<area shape="rect" href="structIMode.html" title="Interface for non&#45;blocking machine modes." alt="" coords="13,5,76,31"/>
<area shape="poly" title=" " alt="" coords="47,44,47,79,42,79,42,44"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for JogMode:</div>
<div class="dyncontent">
<div class="center"><img src="classJogMode__coll__graph.png" border="0" usemap="#aJogMode_coll__map" alt="Collaboration graph"/></div>
<map name="aJogMode_coll__map" id="aJogMode_coll__map">
<area shape="rect" title="Manual jogging mode for up/down movement with keypad (JOG)." alt="" coords="149,93,228,119"/>
<area shape="rect" href="structIMode.html" title="Interface for non&#45;blocking machine modes." alt="" coords="5,5,68,31"/>
<area shape="poly" title=" " alt="" coords="70,35,169,91,167,95,68,40"/>
<area shape="rect" href="classLcd1602.html" title="Wrapper class for a 16x2 HD44780&#45;compatible LCD with PWM backlight control." alt="" coords="92,5,168,31"/>
<area shape="poly" title=" " alt="" coords="148,41,183,91,178,94,143,44"/>
<area shape="rect" href="classKeypadShield.html" title="Non&#45;blocking keypad handler for analog&#45;resistor ladder shields." alt="" coords="192,5,303,31"/>
<area shape="poly" title=" " alt="" coords="234,44,199,94,195,91,229,41"/>
<area shape="rect" href="classStepperDriver.html" title="Non&#45;blocking stepper motor driver with position and velocity control." alt="" coords="327,5,439,31"/>
<area shape="poly" title=" " alt="" coords="345,39,216,96,214,91,343,34"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ac9198309ab3ce358c5af269c773ce04f" id="r_ac9198309ab3ce358c5af269c773ce04f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classJogMode.html#ac9198309ab3ce358c5af269c773ce04f">JogMode</a> (<a class="el" href="classLcd1602.html">Lcd1602</a> &amp;lcd, <a class="el" href="classKeypadShield.html">KeypadShield</a> &amp;keys, <a class="el" href="classStepperDriver.html">StepperDriver</a> &amp;stepper)</td></tr>
<tr class="memdesc:ac9198309ab3ce358c5af269c773ce04f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a new <a class="el" href="classJogMode.html" title="Manual jogging mode for up/down movement with keypad (JOG).">JogMode</a> instance.  <br /></td></tr>
<tr class="separator:ac9198309ab3ce358c5af269c773ce04f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab8d9c9be8b5ad81f5cb6fb41b8da252" id="r_aab8d9c9be8b5ad81f5cb6fb41b8da252"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classJogMode.html#aab8d9c9be8b5ad81f5cb6fb41b8da252">name</a> () const override</td></tr>
<tr class="memdesc:aab8d9c9be8b5ad81f5cb6fb41b8da252"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the name of this mode.  <br /></td></tr>
<tr class="separator:aab8d9c9be8b5ad81f5cb6fb41b8da252"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9851d5ae59f910d10f416806a3c33a1" id="r_ac9851d5ae59f910d10f416806a3c33a1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classJogMode.html#ac9851d5ae59f910d10f416806a3c33a1">begin</a> () override</td></tr>
<tr class="memdesc:ac9851d5ae59f910d10f416806a3c33a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize <a class="el" href="classJogMode.html" title="Manual jogging mode for up/down movement with keypad (JOG).">JogMode</a>.  <br /></td></tr>
<tr class="separator:ac9851d5ae59f910d10f416806a3c33a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4fa13b121783048cd1b04cf8bef04de" id="r_ad4fa13b121783048cd1b04cf8bef04de"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classJogMode.html#ad4fa13b121783048cd1b04cf8bef04de">step</a> () override</td></tr>
<tr class="memdesc:ad4fa13b121783048cd1b04cf8bef04de"><td class="mdescLeft">&#160;</td><td class="mdescRight">Execute one step of JOG behavior.  <br /></td></tr>
<tr class="separator:ad4fa13b121783048cd1b04cf8bef04de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8135de6dbc1dae711b68bd53d5efb34c" id="r_a8135de6dbc1dae711b68bd53d5efb34c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classJogMode.html#a8135de6dbc1dae711b68bd53d5efb34c">end</a> () override</td></tr>
<tr class="memdesc:a8135de6dbc1dae711b68bd53d5efb34c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cleanup performed when leaving <a class="el" href="classJogMode.html" title="Manual jogging mode for up/down movement with keypad (JOG).">JogMode</a>.  <br /></td></tr>
<tr class="separator:a8135de6dbc1dae711b68bd53d5efb34c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_structIMode"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_structIMode')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="structIMode.html">IMode</a></td></tr>
<tr class="memitem:aa6d28f0a2c76d54fa7cc452b5efee520 inherit pub_methods_structIMode" id="r_aa6d28f0a2c76d54fa7cc452b5efee520"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structIMode.html#aa6d28f0a2c76d54fa7cc452b5efee520">~IMode</a> ()</td></tr>
<tr class="memdesc:aa6d28f0a2c76d54fa7cc452b5efee520 inherit pub_methods_structIMode"><td class="mdescLeft">&#160;</td><td class="mdescRight">Virtual destructor for proper cleanup via base pointers.  <br /></td></tr>
<tr class="separator:aa6d28f0a2c76d54fa7cc452b5efee520 inherit pub_methods_structIMode"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a3d50abefbab677778b6b41cd03e9af3a" id="r_a3d50abefbab677778b6b41cd03e9af3a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classLcd1602.html">Lcd1602</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classJogMode.html#a3d50abefbab677778b6b41cd03e9af3a">lcd_</a></td></tr>
<tr class="memdesc:a3d50abefbab677778b6b41cd03e9af3a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reference to the LCD for displaying jog information.  <br /></td></tr>
<tr class="separator:a3d50abefbab677778b6b41cd03e9af3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a566e4e2cc6fc01f80d2c2934fc2e0505" id="r_a566e4e2cc6fc01f80d2c2934fc2e0505"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classKeypadShield.html">KeypadShield</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classJogMode.html#a566e4e2cc6fc01f80d2c2934fc2e0505">keys_</a></td></tr>
<tr class="memdesc:a566e4e2cc6fc01f80d2c2934fc2e0505"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reference to the keypad used for jog commands.  <br /></td></tr>
<tr class="separator:a566e4e2cc6fc01f80d2c2934fc2e0505"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9cc6173a8d2e0efc25a28a224fb4f369" id="r_a9cc6173a8d2e0efc25a28a224fb4f369"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStepperDriver.html">StepperDriver</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classJogMode.html#a9cc6173a8d2e0efc25a28a224fb4f369">stepper_</a></td></tr>
<tr class="memdesc:a9cc6173a8d2e0efc25a28a224fb4f369"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reference to the stepper driver that is being jogged.  <br /></td></tr>
<tr class="separator:a9cc6173a8d2e0efc25a28a224fb4f369"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af745c7359e7f825d052001113caf263e" id="r_af745c7359e7f825d052001113caf263e"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classJogMode.html#af745c7359e7f825d052001113caf263e">uiTick_</a> = 0</td></tr>
<tr class="memdesc:af745c7359e7f825d052001113caf263e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Timestamp (ms) used to pace LCD updates.  <br /></td></tr>
<tr class="separator:af745c7359e7f825d052001113caf263e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab50e857beea45cd3567291829691029a" id="r_ab50e857beea45cd3567291829691029a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classJogMode.html#ab50e857beea45cd3567291829691029a">firstStep_</a> = true</td></tr>
<tr class="memdesc:ab50e857beea45cd3567291829691029a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flag indicating that the next step call is the first one.  <br /></td></tr>
<tr class="separator:ab50e857beea45cd3567291829691029a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Manual jogging mode for up/down movement with keypad (JOG). </p>
<p>Behavior:</p><ul>
<li>UP/DOWN keys move the Z axis in opposite directions at a fixed speed, constrained by configured soft limits.</li>
<li>The current position is periodically displayed on the LCD.</li>
<li>SELECT exits the mode and returns control to the higher-level controller. </li>
</ul>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ac9198309ab3ce358c5af269c773ce04f" name="ac9198309ab3ce358c5af269c773ce04f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9198309ab3ce358c5af269c773ce04f">&#9670;&#160;</a></span>JogMode()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">JogMode::JogMode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classLcd1602.html">Lcd1602</a> &amp;&#160;</td>
          <td class="paramname"><em>lcd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classKeypadShield.html">KeypadShield</a> &amp;&#160;</td>
          <td class="paramname"><em>keys</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classStepperDriver.html">StepperDriver</a> &amp;&#160;</td>
          <td class="paramname"><em>stepper</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Construct a new <a class="el" href="classJogMode.html" title="Manual jogging mode for up/down movement with keypad (JOG).">JogMode</a> instance. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">lcd</td><td>Reference to the LCD used for showing position and hints. </td></tr>
    <tr><td class="paramname">keys</td><td>Reference to the keypad for reading UP/DOWN/SELECT. </td></tr>
    <tr><td class="paramname">stepper</td><td>Reference to the stepper driver for motion control. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ac9851d5ae59f910d10f416806a3c33a1" name="ac9851d5ae59f910d10f416806a3c33a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9851d5ae59f910d10f416806a3c33a1">&#9670;&#160;</a></span>begin()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void JogMode::begin </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initialize <a class="el" href="classJogMode.html" title="Manual jogging mode for up/down movement with keypad (JOG).">JogMode</a>. </p>
<p>Initialize <a class="el" href="classJogMode.html" title="Manual jogging mode for up/down movement with keypad (JOG).">JogMode</a> for manual up/down positioning.</p>
<p>Shows a hint on the LCD, enables the stepper driver, and resets internal timing/flags, including a guard for ignoring the initial SELECT that may have been used to enter the mode.</p>
<p>Behavior:</p><ul>
<li>Resets the local UI tick counter and enables the stepper driver.</li>
<li>Displays a hint on the LCD that UP/DOWN buttons control motion and SELECT exits the mode.</li>
<li>Marks the first step so that a spurious SELECT used to enter the mode can be cleared. </li>
</ul>

<p>Implements <a class="el" href="structIMode.html#abf4c7c5e1758fc13058dac1dd0675982">IMode</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classJogMode_ac9851d5ae59f910d10f416806a3c33a1_cgraph.png" border="0" usemap="#aclassJogMode_ac9851d5ae59f910d10f416806a3c33a1_cgraph" alt=""/></div>
<map name="aclassJogMode_ac9851d5ae59f910d10f416806a3c33a1_cgraph" id="aclassJogMode_ac9851d5ae59f910d10f416806a3c33a1_cgraph">
<area shape="rect" title="Initialize JogMode." alt="" coords="5,31,128,56"/>
<area shape="rect" href="classStepperDriver.html#a08ddf3dd4e038a8818de8a7200ddb4ec" title="Enable or disable the stepper driver." alt="" coords="176,5,340,31"/>
<area shape="poly" title=" " alt="" coords="128,33,162,28,163,33,129,38"/>
<area shape="rect" href="classLcd1602.html#a7004efb68a9891924331923c69706d52" title="Display two lines of flash&#45;resident text as a title." alt="" coords="199,55,317,80"/>
<area shape="poly" title=" " alt="" coords="129,48,185,56,185,61,128,54"/>
</map>
</div>

</div>
</div>
<a id="a8135de6dbc1dae711b68bd53d5efb34c" name="a8135de6dbc1dae711b68bd53d5efb34c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8135de6dbc1dae711b68bd53d5efb34c">&#9670;&#160;</a></span>end()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void JogMode::end </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Cleanup performed when leaving <a class="el" href="classJogMode.html" title="Manual jogging mode for up/down movement with keypad (JOG).">JogMode</a>. </p>
<p>Cleanup for <a class="el" href="classJogMode.html" title="Manual jogging mode for up/down movement with keypad (JOG).">JogMode</a>.</p>
<p>Stops the stepper and ensures it remains enabled in a safe state.</p>
<p>Ensures the stepper motor is stopped and enabled when leaving the mode. </p>

<p>Implements <a class="el" href="structIMode.html#acc782a6205322e642a56aa122c8e0512">IMode</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classJogMode_a8135de6dbc1dae711b68bd53d5efb34c_cgraph.png" border="0" usemap="#aclassJogMode_a8135de6dbc1dae711b68bd53d5efb34c_cgraph" alt=""/></div>
<map name="aclassJogMode_a8135de6dbc1dae711b68bd53d5efb34c_cgraph" id="aclassJogMode_a8135de6dbc1dae711b68bd53d5efb34c_cgraph">
<area shape="rect" title="Cleanup performed when leaving JogMode." alt="" coords="5,35,116,60"/>
<area shape="rect" href="classStepperDriver.html#a08ddf3dd4e038a8818de8a7200ddb4ec" title="Enable or disable the stepper driver." alt="" coords="185,5,349,31"/>
<area shape="poly" title=" " alt="" coords="116,37,170,29,171,34,117,42"/>
<area shape="rect" href="classStepperDriver.html#a8fa4f67459e8366e83a2827fc4e8cf3a" title="Set continuous motion speed in mm/s." alt="" coords="164,55,369,95"/>
<area shape="poly" title=" " alt="" coords="117,52,151,57,150,62,116,57"/>
</map>
</div>

</div>
</div>
<a id="aab8d9c9be8b5ad81f5cb6fb41b8da252" name="aab8d9c9be8b5ad81f5cb6fb41b8da252"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab8d9c9be8b5ad81f5cb6fb41b8da252">&#9670;&#160;</a></span>name()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char * JogMode::name </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the name of this mode. </p>
<dl class="section return"><dt>Returns</dt><dd>Constant C-string "JOG". </dd></dl>

<p>Implements <a class="el" href="structIMode.html#a531317dbb9f073f46bd6b7330ffc58e7">IMode</a>.</p>

</div>
</div>
<a id="ad4fa13b121783048cd1b04cf8bef04de" name="ad4fa13b121783048cd1b04cf8bef04de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4fa13b121783048cd1b04cf8bef04de">&#9670;&#160;</a></span>step()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool JogMode::step </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Execute one step of JOG behavior. </p>
<p>Execute one step of the <a class="el" href="classJogMode.html" title="Manual jogging mode for up/down movement with keypad (JOG).">JogMode</a>.</p>
<p>Reads the keypad, applies motion within configured limits, updates the LCD periodically with the current position, and exits when SELECT is held.</p>
<dl class="section return"><dt>Returns</dt><dd>true if SELECT is pressed and the mode should exit, </dd>
<dd>
false otherwise.</dd></dl>
<p>Behavior:</p><ul>
<li>Reads the stable key state from the keypad.</li>
<li>On the very first step, ignores a SELECT that might have been used to enter the mode (to avoid immediate exit).</li>
<li>Computes the current Z position and applies motion limits [Z_MIN, Z_MAX].</li>
<li>If UP is pressed and within limits, moves upward (Z decreases).</li>
<li>If DOWN is pressed and within limits, moves downward (Z increases).</li>
<li>Otherwise, stops the motor.</li>
<li>Periodically (every ~200 ms) updates the LCD with the current position.</li>
<li>Exits the mode when SELECT is pressed.</li>
</ul>
<dl class="section return"><dt>Returns</dt><dd>true if SELECT is pressed (mode should exit), </dd>
<dd>
false otherwise. </dd></dl>

<p>Implements <a class="el" href="structIMode.html#a9fc61504224e0961d659341cde1140da">IMode</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classJogMode_ad4fa13b121783048cd1b04cf8bef04de_cgraph.png" border="0" usemap="#aclassJogMode_ad4fa13b121783048cd1b04cf8bef04de_cgraph" alt=""/></div>
<map name="aclassJogMode_ad4fa13b121783048cd1b04cf8bef04de_cgraph" id="aclassJogMode_ad4fa13b121783048cd1b04cf8bef04de_cgraph">
<area shape="rect" title="Execute one step of JOG behavior." alt="" coords="5,153,120,179"/>
<area shape="rect" href="classKeypadShield.html#a56c3d96e5cb551c05d612f1ca18af3f1" title="Clear all stored key state and reset debouncing." alt="" coords="195,5,346,31"/>
<area shape="poly" title=" " alt="" coords="69,152,105,97,133,66,167,40,181,32,184,37,169,44,137,70,110,100,73,155"/>
<area shape="rect" href="classStepperDriver.html#a4d1715971817716be1a64e8b5c6c2197" title="Get the current logical position in millimeters." alt="" coords="172,55,369,80"/>
<area shape="poly" title=" " alt="" coords="77,151,116,120,167,89,185,82,187,87,169,94,119,124,80,155"/>
<area shape="rect" href="classLcd1602.html#a2922193bbb32f7cad2c48c5ad0f21f0c" title="Print a RAM&#45;resident C&#45;string." alt="" coords="213,104,328,129"/>
<area shape="poly" title=" " alt="" coords="115,151,167,138,201,130,203,135,169,143,116,156"/>
<area shape="rect" href="classLcd1602.html#a0516b78aa7f4531924a132d2b256f534" title="Position the cursor." alt="" coords="197,153,344,179"/>
<area shape="poly" title=" " alt="" coords="120,163,183,163,183,169,120,169"/>
<area shape="rect" href="classStepperDriver.html#a8fa4f67459e8366e83a2827fc4e8cf3a" title="Set continuous motion speed in mm/s." alt="" coords="168,203,373,243"/>
<area shape="poly" title=" " alt="" coords="110,176,186,197,184,202,109,181"/>
<area shape="rect" href="classKeypadShield.html#a88107445356e42dd346231d899802d4b" title="Get the current stable key state." alt="" coords="191,268,350,293"/>
<area shape="poly" title=" " alt="" coords="77,177,116,215,141,236,169,253,188,261,186,266,167,258,138,240,112,219,74,181"/>
<area shape="rect" href="classStepperDriver.html#ac202361e6f613a083200d36f664d64e7" title="Non&#45;blocking step scheduling; call frequently from loop()." alt="" coords="188,317,353,343"/>
<area shape="poly" title=" " alt="" coords="72,178,108,238,136,273,170,302,183,310,180,314,166,307,132,277,103,241,68,180"/>
<area shape="rect" href="classStepperDriver.html#acb72803a8fdbf2bd2e645b36a3d0306c" title="Emit a single step pulse and update the internal position counter." alt="" coords="421,317,609,343"/>
<area shape="poly" title=" " alt="" coords="354,327,407,327,407,333,354,333"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="ab50e857beea45cd3567291829691029a" name="ab50e857beea45cd3567291829691029a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab50e857beea45cd3567291829691029a">&#9670;&#160;</a></span>firstStep_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool JogMode::firstStep_ = true</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Flag indicating that the next step call is the first one. </p>
<p>Used to ignore a SELECT press that may have been used to enter <a class="el" href="classJogMode.html" title="Manual jogging mode for up/down movement with keypad (JOG).">JogMode</a>, preventing immediate exit. </p>

</div>
</div>
<a id="a566e4e2cc6fc01f80d2c2934fc2e0505" name="a566e4e2cc6fc01f80d2c2934fc2e0505"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a566e4e2cc6fc01f80d2c2934fc2e0505">&#9670;&#160;</a></span>keys_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classKeypadShield.html">KeypadShield</a>&amp; JogMode::keys_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reference to the keypad used for jog commands. </p>

</div>
</div>
<a id="a3d50abefbab677778b6b41cd03e9af3a" name="a3d50abefbab677778b6b41cd03e9af3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d50abefbab677778b6b41cd03e9af3a">&#9670;&#160;</a></span>lcd_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classLcd1602.html">Lcd1602</a>&amp; JogMode::lcd_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reference to the LCD for displaying jog information. </p>

</div>
</div>
<a id="a9cc6173a8d2e0efc25a28a224fb4f369" name="a9cc6173a8d2e0efc25a28a224fb4f369"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9cc6173a8d2e0efc25a28a224fb4f369">&#9670;&#160;</a></span>stepper_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStepperDriver.html">StepperDriver</a>&amp; JogMode::stepper_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reference to the stepper driver that is being jogged. </p>

</div>
</div>
<a id="af745c7359e7f825d052001113caf263e" name="af745c7359e7f825d052001113caf263e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af745c7359e7f825d052001113caf263e">&#9670;&#160;</a></span>uiTick_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t JogMode::uiTick_ = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Timestamp (ms) used to pace LCD updates. </p>
<p>Helps avoid refreshing the display on every loop iteration, updating only at a specified interval (e.g. every 200 ms). </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="Modes_8h_source.html">Modes.h</a></li>
<li><a class="el" href="Modes_8cpp.html">Modes.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
